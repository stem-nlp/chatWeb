webpackJsonp([2,0],[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var s=n(14),i=o(s),a=n(11),c=o(a);n(37);var r=n(46),l=o(r);i.default.use(c.default),new i.default({el:"#app",template:"<App/>",components:{App:l.default}})},,,,,,,,,,,,,function(t,e,n){t.exports=n.p+"static/img/default.d1909e3.png"},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(48),i=o(s),a=n(47),c=o(a);e.default={name:"app",components:{Heads:i.default,ChatList:c.default}}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(36),i=o(s),a=n(11),c=n(16),r=o(c);e.default={name:"chatlist",data:function(){return{showSelBox:0,selFace:"表情",selOther:"其他功能",content:"",topStatus:"",records:[{type:1,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！"},{type:2,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客服机器人",content:"这里是银行智能机器人，请问有什么可以帮助您的吗？"}],EXPS:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g}]}},methods:{getEXP:function(t,e){return this.EXPS.slice((t-1)*e,e*t)},sendMsg:function(){var t=this;return""==this.content?void(0,a.Toast)("请输入消息"):(this.records.push({type:1,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:this.content}),r.default.post("/api/ask",{question:this.content}).then(function(e){if(e.data.code<0)throw"Error";t.records.push({type:2,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客服机器人",content:e.data.data.content}),t.scrollToBottom()}).catch(function(e){t.records.push({type:2,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客服机器人",content:"网络好像出了点问题，请稍后再试哦~"}),t.scrollToBottom()}),this.content="",void this.scrollToBottom())},focusTxtContent:function(){document.querySelector("#txtContent input").focus()},scrollToBottom:function(){setTimeout(function(){var t=document.getElementsByClassName("chatlist")[0];t.scrollTop=t.scrollHeight},100)},replaceFace:function(t){for(var e=this.EXPS,n=0;n<e.length;n++)t=t.replace(e[n].reg,'<img src="static/emotion/'+e[n].file+'"  alt="" />');return t},handleTopChange:function(t){this.topStatus=t},loadTop:function(t){var e=this,n=this;setTimeout(function(){var o=document.getElementsByClassName("chatlist")[0],s=o.scrollHeight;n.records.unshift({type:1,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"游客",content:"你好！"},{type:2,time:i.default.formatDate.format(new Date,"yyyy-MM-dd hh:mm:ss"),name:"客户机器人",content:"这里是银行智能机器人，请问有什么可以帮助您的吗？"}),setTimeout(function(){var t=o.scrollHeight;o.scrollTop=t-s},100),e.$refs.loadmore.onTopLoaded(t)},1500)}},mounted:function(){this.scrollToBottom(),this.focusTxtContent()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"heads",data:function(){return{vociceOpen:!0}}}},function(t,e){"use strict";function n(t,e){for(var e=e-(t+"").length,n=0;n<e;n++)t="0"+t;return t}Object.defineProperty(e,"__esModule",{value:!0});var o=/([yMdhsm])(\1*)/g,s="yyyy-MM-dd";e.default={getQueryStringByName:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e),o="";return null!=n&&(o=n[2]),e=null,n=null,null==o||""==o||"undefined"==o?"":o},formatDate:{format:function(t,e){return e=e||s,e.replace(o,function(e){switch(e.charAt(0)){case"y":return n(t.getFullYear(),e.length);case"M":return n(t.getMonth()+1,e.length);case"d":return n(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return n(t.getHours(),e.length);case"m":return n(t.getMinutes(),e.length);case"s":return n(t.getSeconds(),e.length)}})},parse:function(t,e){var n=e.match(o),s=t.match(/(\d)+/g);if(n.length==s.length){for(var i=new Date(1970,0,1),a=0;a<n.length;a++){var c=parseInt(s[a]),r=n[a];switch(r.charAt(0)){case"y":i.setFullYear(c);break;case"M":i.setMonth(c-1);break;case"d":i.setDate(c);break;case"h":i.setHours(c);break;case"m":i.setMinutes(c);break;case"s":i.setSeconds(c)}}return i}return null}}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,function(t,e,n){t.exports=n.p+"static/img/user.7b4d248.jpg"},,function(t,e,n){n(39);var o=n(2)(n(33),n(50),null,null);t.exports=o.exports},function(t,e,n){n(40);var o=n(2)(n(34),n(51),null,null);t.exports=o.exports},function(t,e,n){n(38);var o=n(2)(n(35),n(49),"data-v-0593a2b7",null);t.exports=o.exports},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"top"},[o("img",{staticClass:"head",attrs:{src:n(13)}}),t._v(" "),o("span",{staticClass:"name"},[t._v("客服机器人")]),t._v(" "),o("span",{staticClass:"voice"},[o("i",{staticClass:"fa",class:t.vociceOpen?"fa-volume-up":"fa-volume-down",attrs:{"aria-hidden":"true"},on:{click:function(e){t.vociceOpen=!t.vociceOpen}}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Heads"),t._v(" "),n("ChatList")],1)},staticRenderFns:[]}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("section",{staticClass:"chatlist",class:t.showSelBox>0?"chatlist-bottom-collapse":"chatlist-bottom"},[o("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"top-pull-text":"加载更多","top-drop-text":"释放加载"},on:{"top-status-change":t.handleTopChange}},[o("ul",[t._l(t.records,function(e){return[1==e.type?o("li",{staticClass:"chat-mine"},[o("div",{staticClass:"chat-user"},[o("img",{attrs:{src:n(44)}})]),t._v(" "),o("div",{staticClass:"time"},[o("cite",[o("i",[t._v(t._s(e.time))]),t._v(t._s(e.name))])]),t._v(" "),o("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e(),t._v(" "),2==e.type?o("li",[o("div",{staticClass:"chat-user"},[o("img",{attrs:{src:n(13)}})]),t._v(" "),o("div",{staticClass:"time"},[o("cite",[t._v(t._s(e.name)),o("i",[t._v(t._s(e.time))])])]),t._v(" "),o("div",{staticClass:"chat-text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})]):t._e()]})],2)])],1),t._v(" "),o("section",{staticClass:"foot"},[o("mt-field",{staticClass:"con",attrs:{id:"txtContent",placeholder:"请输入消息"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMsg(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),o("span",{staticClass:"btn-face",on:{click:function(e){t.showSelBox=1==t.showSelBox?0:1}}},[o("i",{staticClass:"fa fa-smile-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),o("span",{staticClass:"btn btn-send",on:{click:t.sendMsg}},[t._v("发送")]),t._v(" "),o("section",{staticClass:"selbox",class:t.showSelBox>0?"show":"hide"},[o("section",{directives:[{name:"show",rawName:"v-show",value:1==t.showSelBox,expression:"showSelBox==1"}],staticClass:"face-box"},[o("mt-swipe",{attrs:{auto:0,continuous:!1}},t._l(Math.ceil(t.EXPS.length/18),function(e){return o("mt-swipe-item",t._l(t.getEXP(e,18),function(e,n){return o("li",[o("img",{attrs:{src:"static/emotion/"+e.file,alt:"",data:e.code},on:{click:function(n){t.content+=e.code}}})])}),0)}),1)],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:2==t.showSelBox,expression:"showSelBox==2"}]},[t._v(t._s(t.selOther))])])],1)])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.c0a3ca47c8410d7f5964.js.map